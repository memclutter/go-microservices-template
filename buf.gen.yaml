version: v2
clean: true
# Настройки генерации кода
#managed:
#  enabled: true
#  override:
#    - file_option: go_package_prefix
#      value: github.com/memclutter/go-microservices-template
# Плагины для генерации
plugins:
  # Go Protocol Buffers
  - remote: buf.build/protocolbuffers/go:v1.35.1
    out: api/gen
    opt:
      - paths=source_relative

#  # gRPC Go
  - remote: buf.build/grpc/go:v1.5.1
    out: api/gen
    opt:
      - paths=source_relative

#  # gRPC-Gateway
  - remote: buf.build/grpc-ecosystem/gateway:v2.22.0
    out: api/gen
    opt:
      - paths=source_relative
      - generate_unbound_methods=true

#  # OpenAPI v2 (Swagger)
  - remote: buf.build/grpc-ecosystem/openapiv2:v2.22.0
    out: api/docs
    opt:
      - allow_merge=true
      - merge_file_name=api
inputs:
  - directory: api/proto